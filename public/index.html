<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | LabSmartAI</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="card">
        <div class="header">
            <h1>üß™ LabSmartAI</h1>
            <p>Ative sua licen√ßa profissional agora</p>
        </div>

        <form id="checkoutForm">
            <h3>1. Dados do Administrador</h3>
            <div class="grid">
                <input type="text" id="nome" placeholder="Nome Completo *" required>
                <input type="email" id="email" placeholder="E-mail de Acesso *" required>
                <input type="text" id="cpf_cnpj" placeholder="CPF ou CNPJ *" required>
                <input type="text" id="whatsapp" placeholder="WhatsApp *" required>
            </div>

            <h3>2. Sobre o Laborat√≥rio</h3>
            <div class="grid">
                <input type="text" id="empresa" placeholder="Nome da Institui√ß√£o/Empresa *" class="full" required>
                <input type="password" id="senha" placeholder="Crie uma Senha Master *" class="full" required>
            </div>

            <h3>3. Plano e Pagamento</h3>
            <div class="grid">
                <select id="plano" class="full">
                    <option value="Mensal">Plano Mensal</option>
                    <option value="Semestral">Plano Semestral</option>
                    <option value="Anual">Plano Anual</option>
                </select>
                <select id="metodo" class="full">
                    <option value="Cart√£o">Cart√£o de Cr√©dito</option>
                    <option value="PIX">PIX (Aprova√ß√£o Instant√¢nea)</option>
                    <option value="Boleto">Boleto Banc√°rio</option>
                </select>
            </div>

            <div style="margin-top: 20px; font-size: 13px;">
                <input type="checkbox" id="termos" required> Aceito os Termos de Uso e Privacidade.
            </div>

            <button type="submit" class="btn-submit" id="btnText">FINALIZAR E ATIVAR AGORA</button>
        </form>
    </div>

    <script>
        document.getElementById('checkoutForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btnText');
            btn.innerText = "PROCESSANDO...";
            btn.disabled = true;

            const dados = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                cpf: document.getElementById('cpf_cnpj').value,
                whatsapp: document.getElementById('whatsapp').value,
                empresa: document.getElementById('empresa').value,
                senha: document.getElementById('senha').value,
                plano: document.getElementById('plano').value,
                metodo: document.getElementById('metodo').value
            };

            const response = await fetch('/api/cadastro', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            });

            const result = await response.json();
            
            if (response.ok) {
                alert("‚ú® Sucesso! Conta ativada. Verifique seu e-mail.");
                window.location.href = "https://instagram.com/sua_empresa"; // Redireciona
            } else {
                alert("‚ùå Erro: " + result.error);
                btn.innerText = "FINALIZAR E ATIVAR AGORA";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
